<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Thanhâ€™s Asteroid Field â€” Multiplayer</title>
  <link rel="stylesheet" href="style.css" /> 
</head>
<body>
  <h1>ðŸš€ Thanhâ€™s Asteroid Field</h1>

  <div class="hud">
    <div><b>Room</b>: <span id="roomId">â€”</span></div>
    <div><b>Role</b>: <span id="role">â€”</span></div>
    <div><b>Players</b>: <span id="playerCount">0</span></div>

    <div id="hostOnly" style="display:none; margin-top:8px;">
      <div><b>Host ID</b>: <span id="hostId">(waitingâ€¦)</span></div>
      <div class="row" style="margin-top:6px;">
        <input id="inviteLink" type="text" readonly style="width:100%; padding:6px;" />
      </div>
      <div class="row" style="margin-top:6px;">
        <button id="copyBtn">Copy invite link</button>
      </div>
      <div class="help" style="margin-top:6px;">
        Share this link with friends. It includes the Host ID so they wonâ€™t be prompted.
      </div>
    </div>

    <div class="help" style="margin-top:8px;">
      Controls: WASD/Arrows = move â€¢ Mouse = aim â€¢ Auto-fire â€¢ Crash = 7s respawn â€¢ Host: press <b>R</b> to restart.
    </div>
  </div>

  <canvas id="game" width="960" height="600"></canvas>

  <!-- Multiplayer + game code -->
  <script type="module" src="net.js"></script>
  <script type="module" src="game.js"></script>

  <script>
    // Copy button handler
    document.addEventListener('click', async (e) => {
      if (e.target.id === 'copyBtn') {
        const el = document.getElementById('inviteLink');
        el.select(); el.setSelectionRange(0, 99999);
        try {
          await navigator.clipboard.writeText(el.value);
          e.target.textContent = 'Copied!';
          setTimeout(() => (e.target.textContent = 'Copy invite link'), 1200);
        } catch {
          alert('Link selected, press Ctrl/Cmd+C to copy.');
        }
      }
    });
  </script>
</body>
</html>
